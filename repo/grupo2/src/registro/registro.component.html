<div class="registro-card">
	<h2>Registro de usuario</h2>
	<form [formGroup]="form" class="registro-form" (ngSubmit)="onSubmit()">
		<div class="form-row">
			<label for="nombre">Nombre</label>
			<input id="nombre" type="text" pInputText formControlName="nombre" placeholder="Tu nombre" />
			<small class="error" *ngIf="form.get('nombre')?.touched && form.get('nombre')?.invalid">El nombre es obligatorio.</small>
		</div>

		<div class="form-row">
			<label for="email">Email</label>
			<input id="email" type="email" pInputText formControlName="email" placeholder="tucorreo@ejemplo.com" />
			<small class="error" *ngIf="form.get('email')?.touched && form.get('email')?.errors?.['required']">El email es obligatorio.</small>
			<small class="error" *ngIf="form.get('email')?.touched && form.get('email')?.errors?.['email']">Email no válido.</small>
		</div>

		<div class="form-row">
			<label for="password">Contraseña</label>
			<p-password id="password" formControlName="password" [toggleMask]="true" feedback="false" placeholder="Al menos 8 caracteres"></p-password>
			<small class="error" *ngIf="form.get('password')?.touched && form.get('password')?.errors?.['required']">La contraseña es obligatoria.</small>
			<small class="error" *ngIf="form.get('password')?.touched && form.get('password')?.errors?.['minlength']">Mínimo 8 caracteres.</small>
		</div>

		<div class="form-row">
			<label for="confirmPassword">Confirmar contraseña</label>
			<p-password id="confirmPassword" formControlName="confirmPassword" [toggleMask]="true" feedback="false" placeholder="Repite la contraseña"></p-password>
			<small class="error" *ngIf="form.get('confirmPassword')?.touched && form.get('confirmPassword')?.errors?.['required']">Confirmar la contraseña es obligatorio.</small>
			<small class="error" *ngIf="form.touched && form.errors?.['passwordsMismatch']">Las contraseñas no coinciden.</small>
		</div>

		<div class="form-actions">
			<button pButton type="submit" label="Registrarme" class="p-button-raised p-button-primary"></button>
			<button pButton type="button" label="Volver" class="p-button-secondary" (click)="goBack()"></button>
		</div>
	</form>

	<div class="registro-info">
		<p>¿Ya tienes cuenta? <a routerLink="/login">Inicia sesión</a></p>
	</div>

	<div *ngIf="errorMessage" class="p-error" style="margin-top: 1rem;">{{ errorMessage }}</div>
	<div *ngIf="successMessage" class="p-success" style="margin-top: 1rem;">{{ successMessage }}</div>
</div>
